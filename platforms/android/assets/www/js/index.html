<!DOCTYPE html>
<!--[if IE 6]>
<html id="ie6" dir="ltr" lang="es-ES">
<![endif]-->
<!--[if IE 7]>
<html id="ie7" dir="ltr" lang="es-ES">
<![endif]-->
<!--[if IE 8]>
<html id="ie8" dir="ltr" lang="es-ES">
<![endif]-->
<!--[if !(IE 6) | !(IE 7) | !(IE 8)  ]><!-->
<html dir="ltr" lang="es-ES">
<!--<![endif]-->
<head>
<meta charset="UTF-8" />

<title>Mindfood - Blog técnico de OSOCO</title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="stylesheet" type="text/css" media="all" href="http://mindfood.osoco.es/wp-content/themes/OSOCO/style.css" />
<link rel="pingback" href="http://mindfood.osoco.es/xmlrpc.php" />
<!--[if lt IE 9]>
<script src="http://mindfood.osoco.es/wp-content/themes/OSOCO/js/html5.js" type="text/javascript"></script>
<![endif]-->
<link rel="alternate" type="application/rss+xml" title="Mindfood &raquo; Feed" href="http://mindfood.osoco.es/index.php/feed/" />
<link rel="alternate" type="application/rss+xml" title="Mindfood &raquo; RSS de los comentarios" href="http://mindfood.osoco.es/index.php/comments/feed/" />
<link rel='stylesheet' id='core3.0-css'  href='http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0' type='text/css' media='all' />
<link rel='stylesheet' id='core-Default3.0-css'  href='http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/styles/shCoreDefault.css?ver=3.0' type='text/css' media='all' />
<link rel='stylesheet' id='theme-Default3.0-css'  href='http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0' type='text/css' media='all' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://mindfood.osoco.es/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://mindfood.osoco.es/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 3.4.2" />

<!-- All in One SEO Pack 1.6.15.2 by Michael Torbert of Semper Fi Web Design[342,394] -->
<meta name="description" content="Blog ténico de OSOCO" />
<meta name="keywords" content="devops,github,grails,module,opensource,puppet,sysadmin,android,gcm,google,groovy,heroku,notifications,push,sender,debian,gentoo,mysql,plugin,git,scm,subversion,hacker-fridays,osoco,clojure,jruby,jvm,programming,scala,testing" />
<link rel="canonical" href="http://mindfood.osoco.es/" />
<!-- /all in one seo pack -->

<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="blog" />
<meta property="og:title" content="Mindfood" />
<meta property="og:url" content="http://mindfood.osoco.es/" />
<meta property="og:description" content="Otro sitio realizado con WordPress" />
<meta property="og:site_name" content="Mindfood" />
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
</head>

<body class="home blog two-column right-sidebar">
<div id="page" class="hfeed">
	<header id="branding" role="banner">
			<hgroup>
				<h1 id="site-title"><a href="http://mindfood.osoco.es/" title="Mindfood" rel="home"><span>Mindfood</span></a></h1>
				<h2 id="site-description">Otro sitio realizado con WordPress</h2>
			</hgroup>


			<nav id="access" role="navigation">
				<h3 class="assistive-text">Menú principal</h3>
								<div class="skip-link"><a class="assistive-text" href="#content" title="Ir al contenido principal">Ir al contenido principal</a></div>
				<div class="skip-link"><a class="assistive-text" href="#secondary" title="Ir al contenido secundario">Ir al contenido secundario</a></div>
								<div class="menu-general-container"><ul id="menu-general" class="menu"><li id="menu-item-28983430532" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-28983430532"><a href="http://osoco.es">web</a></li>
<li id="menu-item-28983430534" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-28983430534"><a href="http://osoco.es/labs">labs</a></li>
<li id="menu-item-28983430533" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item menu-item-home menu-item-28983430533"><a href="http://mindfood.osoco.es">mindfood</a></li>
</ul></div>			</nav><!-- #access -->
	</header><!-- #branding -->


	<div id="main">
		<div id="primary">
			<div id="content" role="main">

			
						<nav id="nav-above">
			<h3 class="assistive-text">Navegador de artículos</h3>
			<div class="nav-previous"><a href="http://mindfood.osoco.es/index.php/page/2/" ><span class="meta-nav">&larr;</span> Entradas más antiguas</a></div>
			<div class="nav-next"></div>
		</nav><!-- #nav-above -->
	
								
					
	<article id="post-28983430558" class="post-28983430558 post type-post status-publish format-standard hentry category-programacion tag-devops tag-github tag-grails tag-module tag-opensource tag-puppet tag-sysadmin">
		<header class="entry-header">
						<h1 class="entry-title"><a href="http://mindfood.osoco.es/index.php/modulo-de-puppet-para-grails/" title="Enlace permanente a Módulo de Puppet para Grails" rel="bookmark">Módulo de Puppet para Grails</a></h1>
			
						<div class="entry-meta">
				<span class="sep">Publicado el </span><a href="http://mindfood.osoco.es/index.php/modulo-de-puppet-para-grails/" title="13:29" rel="bookmark"><time class="entry-date" datetime="2012-11-13T13:29:39+00:00" pubdate>13 noviembre, 2012</time></a><span class="by-author"> <span class="sep"> por </span> <span class="author vcard"><a class="url fn n" href="http://mindfood.osoco.es/index.php/author/deigote/" title="Ver todas las entradas de deigote" rel="author">deigote</a></span></span>			</div><!-- .entry-meta -->
			
						<div class="comments-link">
				<a href="http://mindfood.osoco.es/index.php/modulo-de-puppet-para-grails/#respond" title="Comentarios en Módulo de Puppet para Grails"><span class="leave-reply">Comentar</span></a>			</div>
					</header><!-- .entry-header -->

				<div class="entry-content">
			<p><em>Nota: esta entrada también la publiqué <a href="http://blog.deigote.com/2012/11/13/grails-puppet-module/">en inglés en mi blog</a>.</em></p>
<h4>Sobre el módule</h4>
<p>El siguiente módulo de Puppet del que quería hablar es el <a href="https://github.com/osoco/puppet-grails">módulo de Puppet para Grails</a>. Igual que <a href="http://blog.deigote.com/tag/puppet/">los anteriores módulos</a> para <a href="http://blog.deigote.com/2012/10/29/puppet-git-and-subversion-modules/#about-puppet">Puppet</a>, está publicado en <a title="OSOCO's Github" href="http://github.com/osoco">la cuenta Github de OSOCO</a>, y es uno de los más sencillos, pero también de los que más hemos usado en nuestra infraestructura, por razones obvias <img src='http://mindfood.osoco.es/wp-includes/images/smilies/icon_biggrin.gif' alt=':-D' class='wp-smiley' />  .</p>
<p>Este módulo permite instalar múltiples versiones de Grails en un nodo de Puppet. El uso no podría ser más simple, como puedes ver en el siguiente código de ejemplo:</p>
<pre class="brush:ruby">
class jenkins {
    ...
    grails { &quot;grails-1.3.5&quot;:
        version =&gt; &#039;1.3.5&#039;,
        destination =&gt; &#039;/opt&#039;
    }

    grails { &quot;grails-1.3.9&quot;:
        version =&gt; &#039;1.3.9&#039;,
        destination =&gt; &#039;/opt&#039;
    }

    grails { &quot;grails-2.0.0&quot;:
        version =&gt; &#039;2.0.0&#039;,
        destination =&gt; &#039;/opt&#039;
    }

    grails { &quot;grails-2.0.1&quot;:
        version =&gt; &#039;2.0.1&#039;,
        destination =&gt; &#039;/opt&#039;
    }
    ...
}
</pre>
<p>En este ejemplo, una clase <em>jenkins</em> declara múltiples instalaciones de Grails (para poder lanzar las baterías de tests de cada proyecto con la versión apropiada de Grails), para lo que añade varios recursos de tipo grails parametrizados por la versión y el directorio destino. El módulo de Grails resuelve la URL de descarga  (la cual, desde la versión 1.3.6 ha de apuntar a Amazon S3, mientras que anteriormente se resolvía a una URL propia) y descargará y desempaquetará el ZIP sólo en caso necesario (es decir, si la versión dada no existe ya en el directorio de destino especificado).</p>
<h4>Dependencias</h4>
<p>El módulo depende del <a href="https://github.com/osoco/puppet-wget">módulo de Puppet para WGet de OSOCO</a>, por lo que debes tener una copia de ambos módulos en tu directorio de módulos. O, si usas <a href="https://github.com/rodjek/librarian-puppet">puppet-librarian</a>, puedes símplemente añadir lo siguiente a tu fichero <em>Puppetfile</em>:</p>
<pre class="brush:ruby">
mod &quot;wget&quot;,
   :git =&gt; &quot;git://github.com/osoco/puppet-wget.git&quot;
mod &quot;grails&quot;,
   :git =&gt; &quot;git://github.com/osoco/puppet-grails.git&quot;
</pre>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
												<span class="cat-links">
				<span class="entry-utility-prep entry-utility-prep-cat-links">Publicado en</span> <a href="http://mindfood.osoco.es/index.php/category/programacion/" title="Ver todas las entradas en Programación" rel="category tag">Programación</a>			</span>
									<span class="sep"> | </span>
							<span class="tag-links">
				<span class="entry-utility-prep entry-utility-prep-tag-links">Etiquetado</span> <a href="http://mindfood.osoco.es/index.php/tag/devops/" rel="tag">devops</a>, <a href="http://mindfood.osoco.es/index.php/tag/github/" rel="tag">github</a>, <a href="http://mindfood.osoco.es/index.php/tag/grails/" rel="tag">grails</a>, <a href="http://mindfood.osoco.es/index.php/tag/module/" rel="tag">module</a>, <a href="http://mindfood.osoco.es/index.php/tag/opensource/" rel="tag">opensource</a>, <a href="http://mindfood.osoco.es/index.php/tag/puppet/" rel="tag">puppet</a>, <a href="http://mindfood.osoco.es/index.php/tag/sysadmin/" rel="tag">sysadmin</a>			</span>
						
			

					</footer><!-- #entry-meta -->
	</article><!-- #post-28983430558 -->

				
					
	<article id="post-28983430552" class="post-28983430552 post type-post status-publish format-standard hentry category-programacion tag-android tag-gcm tag-github tag-google tag-grails tag-groovy tag-heroku tag-notifications tag-push tag-sender">
		<header class="entry-header">
						<h1 class="entry-title"><a href="http://mindfood.osoco.es/index.php/android-gcm-sender/" title="Enlace permanente a Android GCM Sender" rel="bookmark">Android GCM Sender</a></h1>
			
						<div class="entry-meta">
				<span class="sep">Publicado el </span><a href="http://mindfood.osoco.es/index.php/android-gcm-sender/" title="9:03" rel="bookmark"><time class="entry-date" datetime="2012-11-12T09:03:30+00:00" pubdate>12 noviembre, 2012</time></a><span class="by-author"> <span class="sep"> por </span> <span class="author vcard"><a class="url fn n" href="http://mindfood.osoco.es/index.php/author/deigote/" title="Ver todas las entradas de deigote" rel="author">deigote</a></span></span>			</div><!-- .entry-meta -->
			
						<div class="comments-link">
				<a href="http://mindfood.osoco.es/index.php/android-gcm-sender/#comments" title="Comentarios en Android GCM Sender">1</a>			</div>
					</header><!-- .entry-header -->

				<div class="entry-content">
			<p><em>Esta entrada es una traducción al español de <a href="http://blog.deigote.com/2012/11/12/android-gcm-sender/">la que publiqué en mi blog, que está en inglés</a>.</em></p>
<h4>Motivación</h4>
<p>Imagina que estás desarrollando una aplicación Android que necesita recibir notificaciones <em>push</em>. La aplicación encargada de enviar esos mensajes a <acronym title="Google Cloud Messaging">GCM</acronym> está siendo desarrollado por otro equipo, y no sólo no está terminada todavía, sino que además el equipo está en otro departamento de la empresa. No, de hecho está en otra empresa <img src='http://mindfood.osoco.es/wp-includes/images/smilies/icon_smile.gif' alt=':-)' class='wp-smiley' />  . Quieres estar seguro de que tu aplicación cumple las especificaciones (es decir, reacciona de cierta manera cuando recibe cierta notificación), pero no quieres depender de ese otro equipo (y por supuesto, tampoco quieres desarrollar una aplicación que envíe notificaciones <img src='http://mindfood.osoco.es/wp-includes/images/smilies/icon_biggrin.gif' alt=':-D' class='wp-smiley' />  ):</p>
<h4>Solución</h4>
<p>Esa necesidad de una aplicación de envío de mensajes configurables a GCM es el segundo artefacto que <a href="https://twitter.com/asantalla">Adrian Santalla</a> y <a href="http://deigote.com">yo</a> desarrollamos en los dos primeros  <a title="OSOCO hacker fridays" href="http://mindfood.osoco.es/index.php/hacker-fridays-o-catalizadores-de-la-innovacin/">hacker fridays de OSOCO</a>, al que hemos llamado <strong>Android GCM Sender</strong> (siendo el primero <a title="Grails Android GCM Plugin" href="http://blog.deigote.com/2012/10/31/grails-android-gcm-plugin/">el plugin de Android GCM para Grails</a>).</p>
<div id="attachment_659" class="wp-caption alignright" style="width: 310px"><a href="http://blog.deigote.com/wp-content/uploads/2012/11/Android-GCM-Sender-Subscribe-your-devices-and-add-your-project-ID.png"><img class="wp-image-659 " style="width: 300px;" title="Android GCM Sender - Suscríbete con tus dispositivos y añade tu identificador de proyecto" src="http://blog.deigote.com/wp-content/uploads/2012/11/Android-GCM-Sender-Subscribe-your-devices-and-add-your-project-ID.png" alt="" width="300" height="296" /></a><p class="wp-caption-text">Suscribe tus dispositivos usando la URL proporcionada y añade tu identificador de proyecto</p></div>
<p>Empezó siendo la aplicación de prueba para dicho plugin, pero nos dimos cuenta que sería fácil evolucionarla hasta el punto de ser útil para cualquiera: sólo necesitábamos parametrizar el identificador de proyecto (que puedes obtener <a href="http://developer.android.com/guide/google/gcm/gs.html">creando un proyecto tipo Google API</a>) y crear una acción que permitiese la suscripción de dispositivos Android. Puedes usar Android GCM Sender en la siguiente URL: <strong><a title="Android GCM Sender" href="http://grails-android-gcm-sender.herokuapp.com/" target="_blank">http://grails-android-gcm-sender.herokuapp.com/</a></strong>.</p>
<h4>Uso</h4>
<p>El primer paso sería suscribir tus identificadores de dispositivo Android usando la URL <a title="Android GCM Sender - subscribe your device" href="http://grails-android-gcm-sender.herokuapp.com/device/subscribe?deviceToken=yourDeviceToken&amp;projectId=yourProjectId">http://grails-android-gcm-sender.herokuapp.com/device/subscribe?deviceToken=yourDeviceToken&amp;projectId=yourProjectId</a>. No olvides sustituir substitute <em>yourDeviceToken</em> y <em>yourProjectId</em> con tu identificador de proyecto e identificador de dispositivo Android, y recuerda que esta URL está pensaba para ser invocada con algún tipo de HTTPBuilder dentro de una aplicación Android &#8211; opr eso no produce ninguna salida <img src='http://mindfood.osoco.es/wp-includes/images/smilies/icon_smile.gif' alt=':-)' class='wp-smiley' /> . Pero si quieres usarla directamente en tu navegador, también funcionará <img src='http://mindfood.osoco.es/wp-includes/images/smilies/icon_biggrin.gif' alt=':-D' class='wp-smiley' />  .</p>
<div id="attachment_668" class="wp-caption alignright" style="width: 310px"><a href="http://blog.deigote.com/wp-content/uploads/2012/11/Android-GCM-Sender-compose-and-send-your-push-message.png"><img class="size-full wp-image-668 " style="width: 300px;" title="Android GCM Sender - compón y envía tu mensaje push" src="http://blog.deigote.com/wp-content/uploads/2012/11/Android-GCM-Sender-compose-and-send-your-push-message.png" alt="" width="300" height="231" /></a><p class="wp-caption-text">Compón tu mensaje, envíalo a los dispositivos seleccionados y observa el resultado del envío</p></div>
<p>Después de eso, escribe tu identificador de proyecto en la página de inicio de Android GCM Sender y dale al botón de actulizar. Verás un formulario que te permite enviar mensajes (simples o compuestos) a uno o varios dispositivos Android. Ten en cuenta que siempre tendrás disponibles dos dispositivos falsos para el caso en que quieras hacer algún tipo de prueba con ellos. Después de rellenar el formulario. puedes darle al botón Send y verás el resultado del envío. Y si tus identificadores de dispositivo y proyecto son válidos, deberías recibir una notificación push con el mensaje que compusiste en la vista anterior <img src='http://mindfood.osoco.es/wp-includes/images/smilies/icon_biggrin.gif' alt=':-D' class='wp-smiley' />  .</p>
<p>Ten en cuenta que para mantener los datos en un volumen pequeño, tus identificadores de dispositivo y proyecto sólo se guardan durante 24 horas &#8211; piensa que en realidad es una feature y no un bug <img src='http://mindfood.osoco.es/wp-includes/images/smilies/icon_biggrin.gif' alt=':-D' class='wp-smiley' />  ya que así no te tienes que preocupar de des-suscribir tus dispositivos o similar. De hecho, la base de datos está en memoria, por lo que nosotros no tenemos acceso a ella.</p>
<h4>Código fuente</h4>
<p>Android GCM sender corre en <a href="http://www.heroku.com/">Heroku</a>, pero su código fuente está disponible en <a href="https://github.com/osoco/grails-android-gcm-server-example">la cuenta Github de OSOCO</a>, por lo que puedes alojarlo tú mismo si quieres. La aplicación ha sido desarrollada usando <a href="http://grails.org" title="Grails - the search is over">Grails</a>, y a la UI se le ha añadido un poco de picante con <a href="https://github.com/deigote/ajaxify" title="Ajaxify - your links and forms with Ajax ">Ajaxify</a>.</p>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
												<span class="cat-links">
				<span class="entry-utility-prep entry-utility-prep-cat-links">Publicado en</span> <a href="http://mindfood.osoco.es/index.php/category/programacion/" title="Ver todas las entradas en Programación" rel="category tag">Programación</a>			</span>
									<span class="sep"> | </span>
							<span class="tag-links">
				<span class="entry-utility-prep entry-utility-prep-tag-links">Etiquetado</span> <a href="http://mindfood.osoco.es/index.php/tag/android/" rel="tag">android</a>, <a href="http://mindfood.osoco.es/index.php/tag/gcm/" rel="tag">gcm</a>, <a href="http://mindfood.osoco.es/index.php/tag/github/" rel="tag">github</a>, <a href="http://mindfood.osoco.es/index.php/tag/google/" rel="tag">google</a>, <a href="http://mindfood.osoco.es/index.php/tag/grails/" rel="tag">grails</a>, <a href="http://mindfood.osoco.es/index.php/tag/groovy/" rel="tag">groovy</a>, <a href="http://mindfood.osoco.es/index.php/tag/heroku/" rel="tag">heroku</a>, <a href="http://mindfood.osoco.es/index.php/tag/notifications/" rel="tag">notifications</a>, <a href="http://mindfood.osoco.es/index.php/tag/push/" rel="tag">push</a>, <a href="http://mindfood.osoco.es/index.php/tag/sender/" rel="tag">sender</a>			</span>
						
			

					</footer><!-- #entry-meta -->
	</article><!-- #post-28983430552 -->

				
					
	<article id="post-28983430542" class="post-28983430542 post type-post status-publish format-standard hentry category-administracion-de-sistemas tag-debian tag-devops tag-gentoo tag-github tag-module tag-mysql tag-opensource tag-puppet tag-sysadmin">
		<header class="entry-header">
						<h1 class="entry-title"><a href="http://mindfood.osoco.es/index.php/modulo-de-puppet-para-mysql/" title="Enlace permanente a Módulo de Puppet para MySQL" rel="bookmark">Módulo de Puppet para MySQL</a></h1>
			
						<div class="entry-meta">
				<span class="sep">Publicado el </span><a href="http://mindfood.osoco.es/index.php/modulo-de-puppet-para-mysql/" title="8:32" rel="bookmark"><time class="entry-date" datetime="2012-11-06T08:32:20+00:00" pubdate>6 noviembre, 2012</time></a><span class="by-author"> <span class="sep"> por </span> <span class="author vcard"><a class="url fn n" href="http://mindfood.osoco.es/index.php/author/deigote/" title="Ver todas las entradas de deigote" rel="author">deigote</a></span></span>			</div><!-- .entry-meta -->
			
						<div class="comments-link">
				<a href="http://mindfood.osoco.es/index.php/modulo-de-puppet-para-mysql/#comments" title="Comentarios en Módulo de Puppet para MySQL">1</a>			</div>
					</header><!-- .entry-header -->

				<div class="entry-content">
			<p><em>Nota: esta entrada también la <a href="http://blog.deigote.com/2012/11/06/mysql-puppet-module/" title="Puppet MySQL module">publiqué en inglés en mi blog</a>. If you are an english reader, you may want to check it.</em></p>
<p>Continuando con los <a href="http://blog.deigote.com/2012/10/29/puppet-git-and-subversion-modules/#about-puppet">móldulos de Puppet<a> que hemos publicado en <a href="http://github.com/osoco" title="OSOCO's Github">la cuenta de GitHub de OSOCO</a>, hoy hablaré del <a href="https://github.com/osoco/puppet-mysql" title="Módulo de Puppet para MySQL">módulo de Puppet para MySQL</a>, que me ha parecido uno de los más útiles cuando hemos creado nuestras infraestructuras <img src='http://mindfood.osoco.es/wp-includes/images/smilies/icon_smile.gif' alt=':-)' class='wp-smiley' />  .</p>
<p>Hay cantidad de módulos MySQL ya publicados, pero los que probé antes de crear el nuestro eran muy potentes, y por lo tanto complejos y con muchas dependencias. En este caso, quería intentar conseguir justo lo contrario: un módulo sencillo que símplemente funcionase a la hora de hacer las tareas más comunes relacionadas con MySQL: instalarlo, establecer la password de root, crear bases de datos y permitir el acceso de usuarios a las mismas.</p>
<p>Para usar el módulo símplemente debes añadirlo a tus módulos (en nuestro caso usamos <a href="https://github.com/rodjek/librarian-puppet">Puppet Librarian</a> para la gestión de dependencias) y declarar los recursos que necesitas. El siguiente ejemplo muestra nuestra configuración de MySQL para el nodo que es responsable de hospedar a Jenkins:</p>
<pre class="brush:ruby">
class ci_mysql {

    mysql::database { &#039;someProjectTestDB&#039;: }
    mysql::database { &#039;anotherProjectTestDB&#039;: }

    $test_user_name = &#039;test&#039;
    $test_user_pwd = &#039;test&#039;

    mysql::user { &#039;someProjectTestDB-test-user&#039;:
        user =&gt; &quot;$test_user_name&quot;,
        password =&gt; &quot;$test_user_pwd&quot;,
        database =&gt; &#039;someProjectTestDB&#039;,
        host =&gt; &#039;%&#039;
    }

    mysql::user { &#039;anotherProjectTestDB-test-user&#039;:
        user =&gt; &quot;$test_user_name&quot;,
        password =&gt; &quot;$test_user_pwd&quot;,
        database =&gt; &#039;anotherProjectTestDB&#039;,
        host =&gt; &#039;%&#039;
    }

    mysql::user { &#039;anotherProjectTestDB-readonly-user&#039;:
        user =&gt; &#039;readonlyuser&#039;,
        password =&gt; &#039;readonlyuser&#039;,
        database =&gt; &#039;anotherProjectTestDB&#039;,
        privileges =&gt; &#039;SELECT&#039;
    }
}
</pre>
<p>Sólo con eso se instalará el servidor de MySQL y será lanzado como un servicio. Además se crearán dos bases de datos (someProjectTestDB y anotherProjectTestDB) con un usuario con todos los permisos de acceso (de nombre test). Finalmente, el usuario readonlyuser tendrá acceso a la base de datos anotherProjectTestDB, pero sólo podrá hacer consultas de tipo select. Directo y sencillo <img src='http://mindfood.osoco.es/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' />  .</p>
<p>La clase también puede ser configurada con los siguientes parámetros opcionales:</p>
<pre class="brush:ruby">class ci_mysql {
   class { &quot;mysql::install&quot;:
      version =&gt; &quot;5.1.61-0+squeeze1&quot;,
      root_pwd =&gt; &quot;myFancyRootPassword&quot;,
      data_dir =&gt; &quot;/mnt/mysql/datadir&quot;,
   }   
   ...
}
</pre>
<p>De esa manera puedes especificar la versión de MySQL, la contraseña del root, y el directorio de datos que usará MySQL para guardar las bases de datos. Por último, añadir que este módulo lo hemos probado tanto en <strong>Debian</strong> como en <strong>Gentoo</strong> (por lo que debería funcionar bien en Ubuntu).</p>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
												<span class="cat-links">
				<span class="entry-utility-prep entry-utility-prep-cat-links">Publicado en</span> <a href="http://mindfood.osoco.es/index.php/category/administracion-de-sistemas/" title="Ver todas las entradas en Administración de sistemas" rel="category tag">Administración de sistemas</a>			</span>
									<span class="sep"> | </span>
							<span class="tag-links">
				<span class="entry-utility-prep entry-utility-prep-tag-links">Etiquetado</span> <a href="http://mindfood.osoco.es/index.php/tag/debian/" rel="tag">debian</a>, <a href="http://mindfood.osoco.es/index.php/tag/devops/" rel="tag">devops</a>, <a href="http://mindfood.osoco.es/index.php/tag/gentoo/" rel="tag">gentoo</a>, <a href="http://mindfood.osoco.es/index.php/tag/github/" rel="tag">github</a>, <a href="http://mindfood.osoco.es/index.php/tag/module/" rel="tag">module</a>, <a href="http://mindfood.osoco.es/index.php/tag/mysql/" rel="tag">mysql</a>, <a href="http://mindfood.osoco.es/index.php/tag/opensource/" rel="tag">opensource</a>, <a href="http://mindfood.osoco.es/index.php/tag/puppet/" rel="tag">puppet</a>, <a href="http://mindfood.osoco.es/index.php/tag/sysadmin/" rel="tag">sysadmin</a>			</span>
						
			

					</footer><!-- #entry-meta -->
	</article><!-- #post-28983430542 -->

				
					
	<article id="post-28983430535" class="post-28983430535 post type-post status-publish format-standard hentry category-sin-categoria tag-android tag-gcm tag-github tag-grails tag-notifications tag-plugin tag-push">
		<header class="entry-header">
						<h1 class="entry-title"><a href="http://mindfood.osoco.es/index.php/grails-android-gcm-plugin/" title="Enlace permanente a Grails Android GCM Plugin" rel="bookmark">Grails Android GCM Plugin</a></h1>
			
						<div class="entry-meta">
				<span class="sep">Publicado el </span><a href="http://mindfood.osoco.es/index.php/grails-android-gcm-plugin/" title="10:46" rel="bookmark"><time class="entry-date" datetime="2012-10-31T10:46:43+00:00" pubdate>31 octubre, 2012</time></a><span class="by-author"> <span class="sep"> por </span> <span class="author vcard"><a class="url fn n" href="http://mindfood.osoco.es/index.php/author/deigote/" title="Ver todas las entradas de deigote" rel="author">deigote</a></span></span>			</div><!-- .entry-meta -->
			
						<div class="comments-link">
				<a href="http://mindfood.osoco.es/index.php/grails-android-gcm-plugin/#comments" title="Comentarios en Grails Android GCM Plugin">1</a>			</div>
					</header><!-- .entry-header -->

				<div class="entry-content">
			<p>Nota: esta entrada también está <a href="http://blog.deigote.com/2012/10/31/grails-android-gcm-plugin/">publicada en mi blog en inglés</a>. <em>If you are an english reader, you might want to read that version</em>.</p>
<p>Como resultado de los dos primeros <a href="http://mindfood.osoco.es/index.php/hacker-fridays-o-catalizadores-de-la-innovacin/" title="OSOCO hacker fridays"><em>hacker fridays</em> de OSOCO</a>, <a href="https://twitter.com/asantalla">Adrian Santalla</a> y <a href="http://deigote.com">yo</a> publicamos el <a href="http://grails.org/plugin/android-gcm" title="Grails Android GCM Plugin">plugin de Grails para Android GCM</a> (entre otras cosas <img src='http://mindfood.osoco.es/wp-includes/images/smilies/icon_biggrin.gif' alt=':-D' class='wp-smiley' />  ), cuyo <a href="https://github.com/osoco/grails-android-gcm-plugin/" title="Grails Android GCM Plugin source code">código fuente está disponible en Github</a>.</p>
<p>Este pequeño plugin proporciona a tu aplicación Grails acceso a Android <acronym title="Google Cloud Messaging">GCM</a> (el servicio que Googe usa para las notificaciones <em>push</em> de Android) a través de un servicio que es injectado en los artefactos de tu aplicación.</p>
<p>El plugin está publicado en el repositorio oficial de plugins de Grails, así que instalarlo es tan fácil como invocar la orden install-plugin, tras lo cual cualquier servicio, controlador, etc, de tu aplicación podrá usar el servcio androidGCMService. El siguiente ejemplo ilustra el caso de uso más básico:</p>
<pre class="brush: groovy; auto-links: true; collapse: false; gutter: true; first-line: 1; highlight: []; html-script: false; light: false; pad-line-numbers: false; toolbar: true'">
$ grails create-app AwesomeApp 
$ cd AwesomeApp
$ grails install-plugin android-gcm
$ grails create-controller Cool
$ cat &gt; grails-app/controllers/awesomeapp/CoolController.groovy &lt;&lt; EOF
package awesomeapp

class CoolController {

    def androidGcmService

    def index() {  
        render androidGcmService.sendMessage(
            [ 
                aMessageKey : &#039;The message value for the key aMessageKey&#039;, 
                anotherMessageKey : &#039;The message value for the key anotherMessageKey&#039; 
            ],
            [&#039;anAndroidDeviceToken&#039;, &#039;anotherAndroidDeviceToken&#039;],
            &#039;youShallCollapseThisMessage&#039;, &#039;yourGCMAPIKeyProvidedByGoogle&#039;      
        )          
    }
}
EOF
$ grails run-app
$ $ wget -O - http://localhost:8080/AwesomeApp/cool/index 2&gt; /dev/null
MulticastResult(multicast_id=8596196938900195177,total=2,success=0,failure=2,canonical_ids=0,results: [[ errorCode=InvalidRegistration ], [ errorCode=InvalidRegistration ]])
</pre>
<p>Como se ve, el controlador intenta enviar un mensaje (el cual, por su parte, está compuesto por dos mensajes, cada uno con su clave y valor) a dos dispositivos Android, marcando el mensaje como de tipo <em>collapse</em>, y pasando la clave de acceso al API de GCM porporcionada por Google. Cuando el resultado es renderizado, se muestra un objeto de clase MulticastResult (dado que hemos intentado enviar el mensaje a múltiples dispositivos) con el resultado del envío del mensaje (que en este caso es un error de tipo InvalidRegistration para ambos dispositivos, ya que estamos inventándonos su identificador de registro <img src='http://mindfood.osoco.es/wp-includes/images/smilies/icon_biggrin.gif' alt=':-D' class='wp-smiley' />  ). Ten en cuenta que si quieres probar este ejemplo tendrás que <strong>sustituir yourGCMAPIKeyProvidedByGoogle con un identificador de API válido</strong>, si no lo haces el API de Android al que el plugin invoca fallará con una bonita excepción de tipo null pointer <img src='http://mindfood.osoco.es/wp-includes/images/smilies/icon_sad.gif' alt=':-(' class='wp-smiley' />  .</p>
<p>Puedes ver una lista completa de los métodos proporcionados por el servido y de las opciones de configuración disponibles en <a href="https://github.com/osoco/grails-android-gcm-plugin/blob/master/README.md" title="Grails Android GCM Plugin README">el README del proyecto en Github</a>.</p>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
												<span class="cat-links">
				<span class="entry-utility-prep entry-utility-prep-cat-links">Publicado en</span> <a href="http://mindfood.osoco.es/index.php/category/sin-categoria/" title="Ver todas las entradas en Sin categoría" rel="category tag">Sin categoría</a>			</span>
									<span class="sep"> | </span>
							<span class="tag-links">
				<span class="entry-utility-prep entry-utility-prep-tag-links">Etiquetado</span> <a href="http://mindfood.osoco.es/index.php/tag/android/" rel="tag">android</a>, <a href="http://mindfood.osoco.es/index.php/tag/gcm/" rel="tag">gcm</a>, <a href="http://mindfood.osoco.es/index.php/tag/github/" rel="tag">github</a>, <a href="http://mindfood.osoco.es/index.php/tag/grails/" rel="tag">grails</a>, <a href="http://mindfood.osoco.es/index.php/tag/notifications/" rel="tag">notifications</a>, <a href="http://mindfood.osoco.es/index.php/tag/plugin/" rel="tag">plugin</a>, <a href="http://mindfood.osoco.es/index.php/tag/push/" rel="tag">push</a>			</span>
						
			

					</footer><!-- #entry-meta -->
	</article><!-- #post-28983430535 -->

				
					
	<article id="post-28983430517" class="post-28983430517 post type-post status-publish format-standard hentry category-sin-categoria tag-devops tag-git tag-github tag-module tag-puppet tag-scm tag-subversion tag-sysadmin">
		<header class="entry-header">
						<h1 class="entry-title"><a href="http://mindfood.osoco.es/index.php/mdulos-de-puppet-para-git-y-subversin/" title="Enlace permanente a Módulos de Puppet para Git y Subversión" rel="bookmark">Módulos de Puppet para Git y Subversión</a></h1>
			
						<div class="entry-meta">
				<span class="sep">Publicado el </span><a href="http://mindfood.osoco.es/index.php/mdulos-de-puppet-para-git-y-subversin/" title="13:47" rel="bookmark"><time class="entry-date" datetime="2012-10-29T13:47:22+00:00" pubdate>29 octubre, 2012</time></a><span class="by-author"> <span class="sep"> por </span> <span class="author vcard"><a class="url fn n" href="http://mindfood.osoco.es/index.php/author/deigote/" title="Ver todas las entradas de deigote" rel="author">deigote</a></span></span>			</div><!-- .entry-meta -->
			
						<div class="comments-link">
				<a href="http://mindfood.osoco.es/index.php/mdulos-de-puppet-para-git-y-subversin/#comments" title="Comentarios en Módulos de Puppet para Git y Subversión">1</a>			</div>
					</header><!-- .entry-header -->

				<div class="entry-content">
			<p><em>Nota: esta entrada también está <a href="http://blog.deigote.com/2012/10/29/puppet-git-and-subversion-modules/">publicada en inglés en mi blog</a>. If you are an english reader you may want to check out <a href="http://blog.deigote.com/2012/10/29/puppet-git-and-subversion-modules/" title="Puppet Git and Subversion modules">the english version</a> <img src='http://mindfood.osoco.es/wp-includes/images/smilies/icon_smile.gif' alt=':-)' class='wp-smiley' />  .</em></p>
<h3>Puppet</h3>
<p>Durante este último año hemos estado usando <a title="Puppet" href="http://puppetlabs.com/">puppet</a>, una herramienta de configuración que permite automatizar el despligue y configuración de software usando un DSL (en vez de, por ejemplo, scripts caseros de dudosa portabilidad). Durante este tiempo hemos escribo algunos módulos agnósticos de OSOCO, que hemos publicado en nuestra <a title="OSOCO's Github" href="http://github.com/osoco">cuenta de Github</a>, así que he pensado en hacerles algo de publicidad <img src='http://mindfood.osoco.es/wp-includes/images/smilies/icon_biggrin.gif' alt=':-D' class='wp-smiley' /> . Empezaré con dos de los más sencillos, puppet-git y puppet-svn, que te permiten hacer checkouts y actualizar repositorios de estos dos populares SCM&#8217;s</p>
<h3>Puppet Git</h3>
<p>Puedes encontrar el código fuente de este módulo en <a title="Puppet Git module" href="https://github.com/osoco/puppet-git">su repositorio de Github</a>. Permite hacer un checkout de un repositorio o mantener actualizada una copia ya existente. Un caso de uso de ejemplo podría ser un servidor que necesita instalar una serie de herramientas cuando arranca, y se puede ver en otro módulo Puppet que tenemos publicado, <a title="Puppet AWS Tools module" href="https://github.com/osoco/puppet-aws_tools">el de aws-tools</a>, cuyo código relevante puedes ver a continuación:</p>
<pre class="brush:ruby">
class my_awesome_puppet_class {
    include git
    $path = &quot;/my/existing/aws-tools/path&quot;
    git::clone { &quot;aws-tools-clone&quot;:
        url =&gt; &quot;https://github.com/osoco/aws-tools.git&quot;,
        path =&gt; &quot;$path/aws-tools&quot;,
        username =&gt; &quot;&quot;,
        password =&gt; &quot;&quot;,
    }
    git::pull { &quot;aws-tools-pull&quot;:
        path =&gt; &quot;$path/aws-tools&quot;,
    }
}</pre>
<p>Como se puede ver, definimos un par de recursos de tipo <em>clone</em> y <em>pull</em>, los cuales son lo suficientemente inteligentes para ejecutar su operación asociada sólo cuando tiene sentido: la operación de clone sólo se ejecutará cuando el directorio de destino no exista, mientras que la operación pull sólo lo hará cuando si exista <img src='http://mindfood.osoco.es/wp-includes/images/smilies/icon_smile.gif' alt=':-)' class='wp-smiley' />  . Esto mantendrá la copia de las maravillosas <a title="OSOCO aws tools" href="https://github.com/osoco/aws-tools">aws-tools</a> <img src='http://mindfood.osoco.es/wp-includes/images/smilies/icon_biggrin.gif' alt=':-D' class='wp-smiley' />  disponible y actualizada.</p>
<h3>Puppet Subversion</h3>
<p>Prácticamente lo mismo, pero usando el viejo y bueno Subversion (para aquellos que os lo estéis preguntando &#8211; si, todavía puedes usar subversion y ser guay <img src='http://mindfood.osoco.es/wp-includes/images/smilies/icon_biggrin.gif' alt=':-D' class='wp-smiley' />  ). Nuevamente, el código fuente está disponible <a title="Puppet SVN module" href="https://github.com/osoco/puppet-svn">en Github</a> y proporciona básicamente las mismas opearaciones. En este caso, el ejemplo muestra un servidor web que al arrancar ha de obtener una copia de la web que sirve, así como mantenerla siempre actualizada:</p>
<pre class="brush:ruby">
class awesome_website_configuration {
    include svn
    $document_root = &quot;/var/www/awesome_website&quot;
    svn::checkout { &quot;awesome-website-checkout&quot;:
        username =&gt; &quot;my-readonly-svn-user&quot;,
        password =&gt; &quot;someSecretPassword&quot;, 
        url =&gt; &quot;https://svn.somecompany.org/svn/awesome_web/trunk&quot;,
        path =&gt; $document_root,
    }
    svn::update { &quot;awesome-website-update&quot;:
        username =&gt; &quot;my-readonly-svn-user&quot;,
        password =&gt; &quot;someSecretPassword&quot;, 
        path =&gt; $document_root,
    }
}
</pre>
<p>Y eso es todo. Probablemente no son los módulos más extraordinarios que encontrarás, pero son útiles <img src='http://mindfood.osoco.es/wp-includes/images/smilies/icon_smile.gif' alt=':-)' class='wp-smiley' />  .</p>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
												<span class="cat-links">
				<span class="entry-utility-prep entry-utility-prep-cat-links">Publicado en</span> <a href="http://mindfood.osoco.es/index.php/category/sin-categoria/" title="Ver todas las entradas en Sin categoría" rel="category tag">Sin categoría</a>			</span>
									<span class="sep"> | </span>
							<span class="tag-links">
				<span class="entry-utility-prep entry-utility-prep-tag-links">Etiquetado</span> <a href="http://mindfood.osoco.es/index.php/tag/devops/" rel="tag">devops</a>, <a href="http://mindfood.osoco.es/index.php/tag/git/" rel="tag">git</a>, <a href="http://mindfood.osoco.es/index.php/tag/github/" rel="tag">github</a>, <a href="http://mindfood.osoco.es/index.php/tag/module/" rel="tag">module</a>, <a href="http://mindfood.osoco.es/index.php/tag/puppet/" rel="tag">puppet</a>, <a href="http://mindfood.osoco.es/index.php/tag/scm/" rel="tag">scm</a>, <a href="http://mindfood.osoco.es/index.php/tag/subversion/" rel="tag">subversion</a>, <a href="http://mindfood.osoco.es/index.php/tag/sysadmin/" rel="tag">sysadmin</a>			</span>
						
			

					</footer><!-- #entry-meta -->
	</article><!-- #post-28983430517 -->

				
					
	<article id="post-28983430512" class="post-28983430512 post type-post status-publish format-standard hentry category-regular tag-hacker-fridays tag-osoco">
		<header class="entry-header">
						<h1 class="entry-title"><a href="http://mindfood.osoco.es/index.php/hacker-fridays-o-catalizadores-de-la-innovacin/" title="Enlace permanente a Hacker Fridays o catalizadores de la innovación" rel="bookmark">Hacker Fridays o catalizadores de la innovación</a></h1>
			
						<div class="entry-meta">
				<span class="sep">Publicado el </span><a href="http://mindfood.osoco.es/index.php/hacker-fridays-o-catalizadores-de-la-innovacin/" title="17:20" rel="bookmark"><time class="entry-date" datetime="2012-08-08T17:20:00+00:00" pubdate>8 agosto, 2012</time></a><span class="by-author"> <span class="sep"> por </span> <span class="author vcard"><a class="url fn n" href="http://mindfood.osoco.es/index.php/author/osoco/" title="Ver todas las entradas de osoco" rel="author">osoco</a></span></span>			</div><!-- .entry-meta -->
			
						<div class="comments-link">
				<a href="http://mindfood.osoco.es/index.php/hacker-fridays-o-catalizadores-de-la-innovacin/#comments" title="Comentarios en Hacker Fridays o catalizadores de la innovación">4</a>			</div>
					</header><!-- .entry-header -->

				<div class="entry-content">
			<p><span>Con el objetivo de mejorar </span><span>nuestra capacidad de innovación</span><span> acabamos de poner en marcha (el viernes pasado) una iniciativa que hemos bautizado como <strong><em>Hacker Fridays</em></strong>. </span></p>
<h3><img align="right" alt="El Glider. Emblema de la cultura hacker." height="175" src="http://upload.wikimedia.org/wikipedia/commons/c/c1/Glider_%28clarince63%29.png" width="175" alt=""/></h3>
<p><span>Además, hemos pensado en compartir toda la información posible sobre esta iniciativa, que en realidad no deja de ser un experimento, ya que puede resultar de utilidad para otros que se estén planteando lanzar iniciativas similares y necesiten referencias y para quienes estén pensando en OSOCO como proyecto de trabajo y quieran conocer más sobre nuestra visión y las actividades en las que nos embarcamos. </span></p>
<p><span>En esta primera entrada describiré las motivaciones de la iniciativa y cómo hemos pensado articularla inicialmente, pero periódicamente nuestro insigne compañero <a href="https://twitter.com/ArturoHerrero">Arturo Herrero</a> publicará entradas sobre el progreso de la iniciativa, incluyendo los proyectos en los que trabajemos, los problemas encontrados, lo que funciona y lo que no tanto, etc. Permaneced atentos a las entradas publicadas con el tag <a href="http://mindfood.osoco.es/search/hacker-fridays">hacker-fridays</a>.<br/></span></p>
<h2>Sobre la innovación en OSOCO</h2>
<p><span>Un objetivo fundacional en OSOCO es mantenernos en una relativa vanguardia tecnológica respecto al conocimiento y experiencia que puedan acumular los equipos de desarrollo de nuestros potenciales clientes e idealmente, también de nuestros potenciales competidores. Pensamos, y el tiempo así nos lo ha demostrado, que de este modo estaremos en mucho mejor disposición para ofrecer servicios profesionales atractivos para nuestros clientes.</span></p>
<p><span>Por ejemplo, cuando el </span><em>statu quo</em><span> en la mayoría de nuestros clientes consistía (en el mejor de los casos) en Java 1.4, Struts 1.x, Ant e iBatis, nosotros ofrecíamos conocimientos y experiencia en Java 5, Struts 2, Maven y Hibernate. Del mismo modo, ahora que observamos un interés creciente en algunos clientes por la <em>computación en nube</em>, nuestro equipo está en disposición, no sólo de ofrecer experiencia real en computación en nube, sino también en gestión de la configuración y otras prácticas DevOps.</span></p>
<p><span>Hasta el momento nuestra estrategia de innovación se ha basado en acciones muy sencillas, tanto que creo que nunca las hemos puesto por escrito. Quiero pensar que están implícitas en la cultura empresarial que hemos creado en OSOCO. Si tuviera que describir nuestra estrategia de innovación la sintetizaría en los siguientes <strong>principios</strong>:<br/></span></p>
<ol>
<li><span>Cada proyecto supone un reto doble: hacia el exterior, es decir, con nuestro cliente, y hacia el interior, con nuestro propio equipo. Si bien lo principal es satisfacer (y a ser posible superar) las expectativas del cliente en sus diferentes dimensiones: coste, plazo y funcionalidad</span>. Un proyecto sólo se considerará realmente exitoso cuando además aporta un valor interno a OSOCO en forma de  contribuciones que mejoren el conocimiento-experiencia común que atesoramos como empresa.<br/><span></span><span></span></li>
<li><span>Cada nuevo proyecto, por trivial que pudiera parecer, se tomará como una oportunidad para generar valor. Este valor puede tomar distintas formas: evaluar una nueva tecnología, incorporar una herramienta nueva a la <em>caja de herramientas</em> habitual, mejorar alguno de los procesos existentes o cualquier otra.<br/></span></li>
<li><span>Nunca se antepone la innovación al éxito externo del proyecto; es decir, desde el punto de vista del cliente. En consecuencia, las innovaciones propuestas siempre deben mejorar, o al menos no hacer peligrar, el resultado del proyecto percibido por el cliente.<br/></span></li>
</ol>
<p><span>Esta estrategia nos ha permitido innovar los últimos años incorporando temas como Groovy, Grails, Activiti, Spock, Concordion, Amazon Web Services, Google App Engine, Puppet, etc. a nuestro bagaje. Sin embargo, el ritmo de innovación no es demasiado alto, ya que por la aplicación del Principio 3, siempre primamos el éxito del proyecto sobre el grado de innovación alcanzado.</span></p>
<h2>Hacker Fridays</h2>
<h3>¿En qué consisten los Hacker Fridays?</h3>
<p><span></span><span>En dedicar parte de nuestro tiempo en OSOCO a trabajar en <strong>pequeños proyectos propuestos, aprobados y también supervisados por el propio equipo de desarrollo.</strong></span></p>
<h3>¿Cuánto tiempo dedicaremos?</h3>
<p><span>Dedicaremos dos viernes al mes a esta iniciativa, lo que supone un <strong>7,5% del tiempo de trabajo</strong> en OSOCO. Hemos pensado que puede ser más productivo que estos viernes sean consecutivos, con lo que, dedicaremos el último y primer viernes de cada mes.</span></p>
<h3>¿Cuánto durará la iniciativa?</h3>
<p><span>Estamos convencidos de que lejos de ser un experimento extravagante, esta iniciativa mejorará OSOCO de múltiples maneras. Sin embargo, conviene verificar que realmente estamos en lo cierto, así que hemos establecido un <strong>periodo de prueba de 6 meses</strong> de duración. </span></p>
<p><span>Teniendo en cuenta la granularidad ideal de los proyectos en los que estamos pensando, 6 meses será tiempo más que suficiente para comprobar cómo funciona la iniciativa y si obtenemos los efectos beneficiosos que esperamos.</span></p>
<h3>¿Por qué los viernes?</h3>
<p><span>En OSOCO tenemos la política de que los viernes todo el mundo trabaje desde nuestras oficinas, incluídos aquellos que temporalmente trabajan en un proyecto que se desarrolla principalmente en la oficina de algún cliente. Así pues, el viernes es el día perfecto para favorecer la formación de equipos y el trabajo colaborativo. </span><br/><br/><span>Uno de los objetivos de esta iniciativa es precisamente crear oportunidades de colaboración entre desarrolladores que no hayan tenido la oportunidad de hacerlo y mejorar la interrelación entre todo el equipo en general.</span><br/><br/><span>Por otro lado, como los viernes sólo trabajamos por la mañana, siempre cabe la posibilidad de que si te “enganchas” con lo que estás haciendo te puedas quedar por la tarde todo el tiempo que quieras. Dispondremos de un presupuesto para comida y bebida para quienes decidan alargar el <em>hacking</em> el viernes por la tarde.<br/></span></p>
<h3>¿Qué esperamos conseguir?</h3>
<p>Los objetivos de la iniciativa son diversos:</p>
<p><strong>Mejorar nuestra capacidad de innovación</strong></p>
<p>Esperamos mejorar el ritmo al que evaluamos e incorporamos novedades a nuestro repertorio de tecnologías en OSOCO.</p>
<p><strong>Mejorar nuestros proyectos cotidianos</strong></p>
<p><span>¿Cuántas veces nos quedamos con ganas de extraer una funcionalidad como un plugin de Grails o JQuery, o hemos pensado en automatizar una tarea, pero las exigencias del proyecto no nos lo permiten en ese momento? Este es el tipo de proyectos que esperamos abordar con esta iniciativa. </span></p>
<p><span>Los resultados serán relativamente modestos, pero al presentarse siempre a todo el equipo, se irán incorporando a nuestra <em>caja de herramientas</em> común y podremos aprovecharlos en futuros proyectos para ser más productivos.</span></p>
<p><strong>Conseguir un entorno estimulante para nuestros <em>cerebros de obra</em> [<a href="#cerebros-obra">1</a>]</strong></p>
<p>El equipo de OSOCO está integrado por programadores apasionados por su trabajo y por lo que hacen. Este tipo de programador, a diferencia del que entiende la profesión como “un trabajo más”, necesita encontrarse en un entorno que le plantee nuevos desafíos constantemente.</p>
<p>Si alguien empieza a percibir su trabajo como monótono y repetitivo, los hacker fridays pueden ser la oportunidad de resolver los problemas recurrentes con los que nos enfrentamos en los proyectos desde un punto de vista original y de compartir la solución con el resto del equipo.</p>
<p>No se trata de que los proyectos cotidianos sean aburridos y los viernes sirvan de vía de escape, sino de encontrar mejores formas de trabajar en nuestro día a día con los resultados que vayamos obteniendo de esta iniciativa.</p>
<p><strong>Contribuir a la comunidad de software libre</strong></p>
<p>En OSOCO siempre hemos basado nuestros proyectos en software libre: lenguajes de programación, marcos de trabajo, bases de datos, librerías de desarrollo, editores, sistemas operativos, etc.</p>
<p>Con los resultados que obtengamos en esta iniciativa contribuiremos, aunque sea modestamente, a este movimiento.</p>
<p><strong>Fortalecer el equipo</strong></p>
<p>Esperamos que se establezcan equipos de trabajo entre desarrolladores que no trabajan juntos habitualmente. Trabajar para obtener un resultado útil en un ambiente divertido y relajado puede ayudar a reforzar los vínculos de amistad y compañerismo entre nosotros.</p>
<p><strong>Aprendizaje cruzado</strong></p>
<p><span>Trabajar con otras personas y estar expuesto a sus diferentes puntos de vista siempre es enriquecedor y se puede aprender mucho de cada uno de los buenos profesionales con que contamos en OSOCO. Además, aunque no se participe directamente en un proyecto, puesto que los resultados se expondrán al resto del equipo, todos nos beneficiaremos de las lecciones aprendidas.</span></p>
<h3>¿Cuál es la visión de la iniciativa? ¿Qué es y qué no es?</h3>
<p><span>Para que la iniciativa sirva para alcanzar los objetivos que nos hemos propuesto y que acabamos de describir, creemos que es importante centrarse en pequeños desarrollos, especialmente al principio, que nos permitan obtener resultados tangibles sin esperar semanas para ello. De esta manera ganaremos en confianza y podremos ir pensando en objetivos un poco más ambiciosos con el tiempo.<br/><br/></span><span>Idealmente, los primeros proyectos deberían poder finalizarse en 1&#160;o 2 viernes como mucho. El tipo de desarrollos en los que estamos pensando son aquellos que podamos empezar a utilizar en nuestros proyectos del día a día casi de manera inmediata: plugins de Grails, plugins de JQuery, automatización de tareas (configuración, despliegues, etc.), contribuciones a proyectos de software libre que utilizamos (Groovy, Grails, Spock, CodeNarc, etc.) en forma de bugs resueltos, mejoras en la documentación, etc.</span><br/><br/><span>La visión de la iniciativa es obtener contribuciones útiles tanto para OSOCO como para la comunidad de software libre de manera frecuente.</span><br/><br/><span>Por tanto, no se trata de hacer un laboratorio de startup, ni de proponer ideas de negocio, ni de aprovechar la oportunidad para desarrollar los proyectos personales. Se trata simplemente de abordar pequeños desarrollos con una finalidad muy concreta: facilitarnos el día a día en OSOCO y contribuirlos a la comunidad.</span><br/><span></span><br/><span>Tampoco está pensado para que se use de excusa para aprender tal o cual nuevo lenguaje super cool con el que me apetece jugar. Para esto están los fines de semana.</span><br/><br/><span>Resumiendo, no se trata de una iniciativa como la del 20% de Google, sino más bien como la de los <a href="http://www.google.com/url?q=http%3A%2F%2Fhackergarten.net%2F&amp;sa=D&amp;sntz=1&amp;usg=AFrqEzcR-S5cnFZrouUKxn4ApfyygPKIPA">Hackergarten</a>.</span></p>
<h3>¿Cómo lo organizamos? ¿Qué reglas seguiremos?</h3>
<p><span>Nuestra intención es definir el menor número posible de reglas y ver qué tal somos capaces de organizarnos así y cuáles son los resultados que conseguimos.</span><br/><br/><span>Dispondremos de un tablón de proyectos compartido, en el que cualquiera podrá añadir sus propuestas de proyectos. No se aceptarán ideas que no se hayan madurado lo suficiente. Es decir, las ideas tienen que ser concretas y habrá que especificar unos datos mínimos como: los resultados que se espera obtener, el equipo deseable para su realización, los plazos estimados, por qué es de utilidad para nuestros proyectos en OSOCO, etc.</span><br/><br/><span>El objetivo lo defines tú, pero tienes que ser capaz de describirlo. Al final tiene que poderse establecer claramente si un proyecto ha sido exitoso o no. Con esto no queremos decir que no sea aceptable que un proyecto fracase. El objetivo es aprender y para eso hay que arriesgarse a fracasar, siendo capaces de aprender de los errores. Igualmente valioso puede ser que un equipo nos cuente lo que les ha funcionado, como lo que no les ha funcionado ya que es preferible darse cuenta en estos pequeños desarrollos que fracasar estrepitosamente en un proyecto real.</span><br/><br/><span>No existen restricciones respecto a las tecnologías a emplear (siempre que no se convierta en mero <em><strong>onanismo tecnológico</strong></em>), excepto que se debe usar software libre y el resultado también deberá ser liberado con una licencia de software libre.</span></p>
<h3>¿Cómo se eligen los proyectos?</h3>
<p><span>Como ya se ha explicado, uno de los objetivos de esta idea es crear equipo, para ello hemos pensado que no se pueda trabajar individualmente en los proyectos y que al menos deberán trabajar dos personas en cada proyecto.</span><br/><br/><span>Por lo tanto, un primer paso para elegir un proyecto es conseguir crear el equipo de trabajo. Puedes exponer tu idea en el tablón de proyectos y aprovechar alguna ocasión, como durante el desayuno o la comida, para hacer campaña a favor de tu proyecto, con el fin de poder formar el equipo necesario. Si expones una idea y no logras encontrar compañero de aventuras, tendrás que descartarla o intentar defenderla mejor.</span></p>
<h3>¿Cómo haremos el seguimiento de los proyectos?</h3>
<p><span>Para evitar que un proyecto se pueda bloquear y consumir demasiado tiempo, de vez en cuando el equipo deberá resumir el estado del proyecto al resto de desarrolladores. De esta manera, si los demás piensan que se está enfocándolo mal o que se ha llegado a un callejón sin salida, podrán hacérselo ver.</span><br/><br/><span>Al finalizar el proyecto se realizará una breve presentación de los resultados al resto del equipo, haciéndose hincapié en aquellos resultados obtenidos que sean susceptibles de utilizarse en los proyectos de OSOCO y en las lecciones aprendidas, ya sean positivas o negativas.</span></p>
<h3>¿Cuánto costará?</h3>
<p><span>Obviamente, este experimento no es gratis. Estimamos que estos primeros seis meses tendrán un coste de unos 30K euros, sin valorar otro tipo de efectos, como la repercusión que tendrá en los plazos de entrega del resto de proyectos.</span><span></span></p>
<h3>Referencias</h3>
<div id="cerebros-obra">[1] <em>Gestionando Cerebros de Obra</em>. Beatriz Muñoz-Seca: <a href="http://www.youtube.com/watch?v=K5ttuDbNC98"><a href="http://www.youtube.com/watch?v=K5ttuDbNC98">http://www.youtube.com/watch?v=K5ttuDbNC98</a></a></div>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
												<span class="cat-links">
				<span class="entry-utility-prep entry-utility-prep-cat-links">Publicado en</span> <a href="http://mindfood.osoco.es/index.php/category/regular/" title="Ver todas las entradas en regular" rel="category tag">regular</a>			</span>
									<span class="sep"> | </span>
							<span class="tag-links">
				<span class="entry-utility-prep entry-utility-prep-tag-links">Etiquetado</span> <a href="http://mindfood.osoco.es/index.php/tag/hacker-fridays/" rel="tag">hacker-fridays</a>, <a href="http://mindfood.osoco.es/index.php/tag/osoco/" rel="tag">osoco</a>			</span>
						
			

					</footer><!-- #entry-meta -->
	</article><!-- #post-28983430512 -->

				
					
	<article id="post-20001663834" class="post-20001663834 post type-post status-publish format-standard hentry category-regular tag-clojure tag-grails tag-groovy tag-jruby tag-jvm tag-programming tag-scala">
		<header class="entry-header">
						<h1 class="entry-title"><a href="http://mindfood.osoco.es/index.php/polyglot-programming/" title="Enlace permanente a Polyglot Programming" rel="bookmark">Polyglot Programming</a></h1>
			
						<div class="entry-meta">
				<span class="sep">Publicado el </span><a href="http://mindfood.osoco.es/index.php/polyglot-programming/" title="10:10" rel="bookmark"><time class="entry-date" datetime="2012-03-27T10:10:00+00:00" pubdate>27 marzo, 2012</time></a><span class="by-author"> <span class="sep"> por </span> <span class="author vcard"><a class="url fn n" href="http://mindfood.osoco.es/index.php/author/osoco/" title="Ver todas las entradas de osoco" rel="author">osoco</a></span></span>			</div><!-- .entry-meta -->
			
						<div class="comments-link">
				<a href="http://mindfood.osoco.es/index.php/polyglot-programming/#respond" title="Comentarios en Polyglot Programming"><span class="leave-reply">Comentar</span></a>			</div>
					</header><!-- .entry-header -->

				<div class="entry-content">
			<div class="im">
<h2>Polyglot Programming</h2>
<p>How many programming languages do you know?</p>
</div>
<p>Most programmers know several languages. We, as web developers, work on a daily basis with Groovy, SQL, Bash Scripting, HTML, CSS, JavaScript…</p>
<p>Learning different languages allows us to solve problems with the most appropriate language and to explore new paths of thinking about computational problems.</p>
<div class="im">
<p><a href="http://www.nealford.com/" target="_blank">Neal Ford</a> coined the term <strong><a href="http://memeagora.blogspot.com.es/2006/12/polyglot-programming.html" target="_blank">polyglot programming</a></strong>, to refer about this topic.</p>
<blockquote>
<p>I think it’s important in this day and age of polyglot programming to understand a variety of different languages, as they are the design tools we use to craft software. Just like regular engineers must understand the physical properties of different materials, we should understand the capabilities, strengths, and weaknesses of different languages. And when to apply them.</p>
<p>Neal Ford</p>
</blockquote>
</div>
<div class="im">
<h2>Polyglot JVM and Polyglot Grails</h2>
</div>
<p><em>Java</em> has long been known simply as a programming language. Today, when thinking in <em>Java</em> we refer also a robust and mature development platform. Currently, the <a href="http://en.wikipedia.org/wiki/List_of_JVM_languages" target="_blank">Java Virtual Machine (JVM) supports over 200 different programming languages</a>.</p>
<p>These days we have been exploring different languages on the JVM: Java, Groovy, Scala, Clojure, JRuby&#8230; and how to incorporate them into a Grails project. We shared our experiences with others developers at <a href="http://www.springio.net/" target="_blank">Spring I/O 2012</a> and <a href="http://codemotion.es/" target="_blank">Codemotion 2012</a>.</p>
<div class="im">
<p>Hope you enjoy the slides.</p>
</div>
<div id="__ss_11664272"><iframe frameborder="0" height="395" marginheight="0" marginwidth="0" scrolling="no" src="http://www.slideshare.net/slideshow/embed_code/11664272" width="475"></iframe></div>
<div></div>
<div id="__ss_12150303"><iframe frameborder="0" height="395" marginheight="0" marginwidth="0" scrolling="no" src="http://www.slideshare.net/slideshow/embed_code/12150303" width="475"></iframe></div>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
												<span class="cat-links">
				<span class="entry-utility-prep entry-utility-prep-cat-links">Publicado en</span> <a href="http://mindfood.osoco.es/index.php/category/regular/" title="Ver todas las entradas en regular" rel="category tag">regular</a>			</span>
									<span class="sep"> | </span>
							<span class="tag-links">
				<span class="entry-utility-prep entry-utility-prep-tag-links">Etiquetado</span> <a href="http://mindfood.osoco.es/index.php/tag/clojure/" rel="tag">clojure</a>, <a href="http://mindfood.osoco.es/index.php/tag/grails/" rel="tag">grails</a>, <a href="http://mindfood.osoco.es/index.php/tag/groovy/" rel="tag">groovy</a>, <a href="http://mindfood.osoco.es/index.php/tag/jruby/" rel="tag">jruby</a>, <a href="http://mindfood.osoco.es/index.php/tag/jvm/" rel="tag">jvm</a>, <a href="http://mindfood.osoco.es/index.php/tag/programming/" rel="tag">programming</a>, <a href="http://mindfood.osoco.es/index.php/tag/scala/" rel="tag">scala</a>			</span>
						
			

					</footer><!-- #entry-meta -->
	</article><!-- #post-20001663834 -->

				
					
	<article id="post-17147476017" class="post-17147476017 post type-post status-publish format-standard hentry category-regular tag-groovy tag-programming">
		<header class="entry-header">
						<h1 class="entry-title"><a href="http://mindfood.osoco.es/index.php/create-your-own-groovy-type-conversion/" title="Enlace permanente a Create your own Groovy type conversion" rel="bookmark">Create your own Groovy type conversion</a></h1>
			
						<div class="entry-meta">
				<span class="sep">Publicado el </span><a href="http://mindfood.osoco.es/index.php/create-your-own-groovy-type-conversion/" title="10:00" rel="bookmark"><time class="entry-date" datetime="2012-02-06T10:00:00+00:00" pubdate>6 febrero, 2012</time></a><span class="by-author"> <span class="sep"> por </span> <span class="author vcard"><a class="url fn n" href="http://mindfood.osoco.es/index.php/author/osoco/" title="Ver todas las entradas de osoco" rel="author">osoco</a></span></span>			</div><!-- .entry-meta -->
			
						<div class="comments-link">
				<a href="http://mindfood.osoco.es/index.php/create-your-own-groovy-type-conversion/#respond" title="Comentarios en Create your own Groovy type conversion"><span class="leave-reply">Comentar</span></a>			</div>
					</header><!-- .entry-header -->

				<div class="entry-content">
			<h2>Type conversion the standard way</h2>
<p>Type conversion or casting is a programming language method for changing an object&#8217;s data type into another.</p>
<p>I’m sure you are familiar with this code that converts a String to an Integer.</p>
<pre>def number = (Integer)'1'
def number = '1'.toInteger()
def number = '1' as Integer</pre>
<p>If I want to convert the type of my own objects, I need to create a method to achieve this goal. I copy object properties to another object in a generic way; if a property exists on target object, I copy it from the source object.</p>
<pre>class User {
    String name
    String city
    Integer age

    def toAdminUser() {
        def adminUser = new AdminUser()
        copyProperties(this, adminUser)
        return adminUser
    }

    def copyProperties(source, target) {
        source.properties.each { key, value -&gt;
            if (target.hasProperty(key) &amp;&amp; !(key in ['class', 'metaClass'])) {
                target[key] = value
            }
        }
    }
}

class AdminUser {
    String name
    String city
    Integer age
}</pre>
<p>Now I can do something like this:</p>
<pre><code>adminUser = user.toAdminUser() </code></pre>
<h2>Type conversion the fancy way</h2>
<p>Great, but I want to use this fancy way to coerce one type to another:</p>
<pre><code>adminUser = user as AdminUser </code></pre>
<p>Simple, <a href="http://groovy.codehaus.org/Operator+Overloading">Groovy supports operator overloading</a> and creating your own type conversion is really easy: we can <strong>override the <a href="http://groovy.codehaus.org/groovy-jdk/java/lang/Object.html#asType%28java.lang.Class%29">asType()</a> method</strong>.</p>
<pre>class User {
    String name
    String city
    Integer age

    Object asType(Class clazz) {
        if (clazz == AdminUser) {
            def adminUser = new AdminUser()
            copyProperties(this, adminUser)
            return adminUser
        }
        else {
            super.asType(clazz)
        }
    }

    def copyProperties(source, target) {
        source.properties.each { key, value -&gt;
            if (target.hasProperty(key) &amp;&amp; !(key in ['class', 'metaClass'])) {
                target[key] = value
            }
        }
    }
}
</pre>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
												<span class="cat-links">
				<span class="entry-utility-prep entry-utility-prep-cat-links">Publicado en</span> <a href="http://mindfood.osoco.es/index.php/category/regular/" title="Ver todas las entradas en regular" rel="category tag">regular</a>			</span>
									<span class="sep"> | </span>
							<span class="tag-links">
				<span class="entry-utility-prep entry-utility-prep-tag-links">Etiquetado</span> <a href="http://mindfood.osoco.es/index.php/tag/groovy/" rel="tag">groovy</a>, <a href="http://mindfood.osoco.es/index.php/tag/programming/" rel="tag">programming</a>			</span>
						
			

					</footer><!-- #entry-meta -->
	</article><!-- #post-17147476017 -->

				
					
	<article id="post-15965833712" class="post-15965833712 post type-post status-publish format-standard hentry category-regular tag-grails tag-groovy tag-testing">
		<header class="entry-header">
						<h1 class="entry-title"><a href="http://mindfood.osoco.es/index.php/asynchronous-tests-with-gpars-osoco-test-gallery-part-4/" title="Enlace permanente a Asynchronous tests with GPars (Osoco test gallery, part 4)" rel="bookmark">Asynchronous tests with GPars (Osoco test gallery, part 4)</a></h1>
			
						<div class="entry-meta">
				<span class="sep">Publicado el </span><a href="http://mindfood.osoco.es/index.php/asynchronous-tests-with-gpars-osoco-test-gallery-part-4/" title="22:00" rel="bookmark"><time class="entry-date" datetime="2012-01-16T22:00:06+00:00" pubdate>16 enero, 2012</time></a><span class="by-author"> <span class="sep"> por </span> <span class="author vcard"><a class="url fn n" href="http://mindfood.osoco.es/index.php/author/osoco/" title="Ver todas las entradas de osoco" rel="author">osoco</a></span></span>			</div><!-- .entry-meta -->
			
						<div class="comments-link">
				<a href="http://mindfood.osoco.es/index.php/asynchronous-tests-with-gpars-osoco-test-gallery-part-4/#respond" title="Comentarios en Asynchronous tests with GPars (Osoco test gallery, part 4)"><span class="leave-reply">Comentar</span></a>			</div>
					</header><!-- .entry-header -->

				<div class="entry-content">
			<p>If you wrote multithreaded code in Groovy/Grails, I&#8217;m sure you stumbled upon the GPars library. It simplifies parallel processing &#8211; sometimes it&#8217;s as easy as wrapping a code fragment with a GPars closure, changing the iteration method (in our example from <code>each</code> to <code>eachParallel</code>) and passing the closure to a GPars pool. The library implementation handles the executor pool creation and adds new methods to collections.</p>
<p>Whenever I deliberately add multithreading, I always separate responsibilities (processing logic and concurrency handling). I wrap the single-threaded class with a new one, handing the parallel execution (creating a pool, managing threads, handling cancellation, etc.):</p>
<pre>class MultithreadedProcessorService {
    ProcessorService processorService
    def threadPoolSize = ConfigurationHolder.config.threadPool.size

    void processMultithreaded(batches) {
        GParsPool.withPool(threadPoolSize) {
            batches.eachParallel { batch -&gt;
                processorService.process(batch)
            }
        }
    }
}

class ProcessorService {
    void process(batch) {
        // some processing
    }
}
</pre>
<p>To test the multithreaded class you can you use Spock interactions. As opposed to Groovy and Grails mocks, they are thread-safe and you won&#8217;t get any weird and unstable results:</p>
<pre>class MultithreadedProcessorServiceSpec extends UnitSpec {
    private MultithreadedProcessorService multithreadedProcessorService
    // Using Spock mocks because they are thread-safe
    private ProcessorService processorService = Mock(ProcessorService)

    def setup() {
        mockConfig('threadPool.size=2')
        multithreadedProcessorService = new MultithreadedProcessorService(
            processorService: processorService
        )
    }

    def 'processes batches using multiple threads'() {
        given:
        def batches = [[0, 1], [2, 3, 4], [5]]
        def processedBatches = markedAsNotProcessed(batches)

        when:
        multithreadedProcessorService.processMultithreaded(batches)

        then:
        batches.size() * processorService.process({ batch -&gt;
            processedBatches[batch] = true
            batch in batches
        })
        assertAllProcessed(processedBatches)

    }

    private markedAsNotProcessed(batches) {
        batches.inject([:]) { processed, batch -&gt;
            processed[batch] = false
            processed
        }
    }

    private void assertAllProcessed(batches) {
        assert batches*.value == [true] * batches.size()
    }
}
</pre>
<hr />
<p>This post series present the best of Osoco tests &#8211; tests that were tricky or we are just proud of. You can find a runnable source code for this test and more in the <a href="https://github.com/osoco/grails-test-gallery" target="_blank">Grails Test Gallery project</a> shared on GitHub.</p>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
												<span class="cat-links">
				<span class="entry-utility-prep entry-utility-prep-cat-links">Publicado en</span> <a href="http://mindfood.osoco.es/index.php/category/regular/" title="Ver todas las entradas en regular" rel="category tag">regular</a>			</span>
									<span class="sep"> | </span>
							<span class="tag-links">
				<span class="entry-utility-prep entry-utility-prep-tag-links">Etiquetado</span> <a href="http://mindfood.osoco.es/index.php/tag/grails/" rel="tag">grails</a>, <a href="http://mindfood.osoco.es/index.php/tag/groovy/" rel="tag">groovy</a>, <a href="http://mindfood.osoco.es/index.php/tag/testing/" rel="tag">testing</a>			</span>
						
			

					</footer><!-- #entry-meta -->
	</article><!-- #post-15965833712 -->

				
					
	<article id="post-15684824031" class="post-15684824031 post type-post status-publish format-standard hentry category-regular tag-grails tag-groovy tag-testing">
		<header class="entry-header">
						<h1 class="entry-title"><a href="http://mindfood.osoco.es/index.php/grails-base-persistence-specification-osoco-test-gallery-part-3/" title="Enlace permanente a Grails base persistence specification (Osoco test gallery, part 3)" rel="bookmark">Grails base persistence specification (Osoco test gallery, part 3)</a></h1>
			
						<div class="entry-meta">
				<span class="sep">Publicado el </span><a href="http://mindfood.osoco.es/index.php/grails-base-persistence-specification-osoco-test-gallery-part-3/" title="22:15" rel="bookmark"><time class="entry-date" datetime="2012-01-11T22:15:06+00:00" pubdate>11 enero, 2012</time></a><span class="by-author"> <span class="sep"> por </span> <span class="author vcard"><a class="url fn n" href="http://mindfood.osoco.es/index.php/author/osoco/" title="Ver todas las entradas de osoco" rel="author">osoco</a></span></span>			</div><!-- .entry-meta -->
			
						<div class="comments-link">
				<a href="http://mindfood.osoco.es/index.php/grails-base-persistence-specification-osoco-test-gallery-part-3/#respond" title="Comentarios en Grails base persistence specification (Osoco test gallery, part 3)"><span class="leave-reply">Comentar</span></a>			</div>
					</header><!-- .entry-header -->

				<div class="entry-content">
			<p>In our projects we include at least one integration test per domain class. We want to assure us that the GORM mapping is correct and the class is persistable in the target database.  The test plan is simple:</p>
<ul>
<li>create a valid persistable sample of the domain object</li>
<li>save it</li>
<li>clear Hibernate first level cache (i.e. flush and clear current session)</li>
<li>retrieve the object once again and compare it with the previously saved object. They must be equal as by <code>equals()</code> but be different object references</li>
</ul>
<p>We put the steps above in a base abstract specification. In concrete specifications we implement merely the factory method spawning a persistable object instance.</p>
<pre>abstract class PersistenceSpec extends IntegrationSpec {
    SessionFactory sessionFactory

    protected abstract createPersistableDomainObject()

    def 'persistable domain object should be able to be saved and retrieved'() {
        given:
        def persistableDomainObject = createPersistableDomainObject()

        when:
        def savedDomainObject = persistableDomainObject.save()

        then:
        savedDomainObject.id != null

        when:
        clearFirstLevelCache()

        def retrievedDomainObject = persistableDomainObject.class.get(savedDomainObject.id)

        then:
        savedDomainObject == retrievedDomainObject
        !savedDomainObject.is(retrievedDomainObject)
    }

    private clearFirstLevelCache() {
        sessionFactory.currentSession.flush()
        sessionFactory.currentSession.clear()
    }
}
</pre>
<hr />
<p>This post series present the best of Osoco tests &#8211; tests that were tricky or we are just proud of. You can find a runnable source code for this test and more in the <a href="https://github.com/osoco/grails-test-gallery" target="_blank">Grails Test Gallery project</a> shared on GitHub.</p>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
												<span class="cat-links">
				<span class="entry-utility-prep entry-utility-prep-cat-links">Publicado en</span> <a href="http://mindfood.osoco.es/index.php/category/regular/" title="Ver todas las entradas en regular" rel="category tag">regular</a>			</span>
									<span class="sep"> | </span>
							<span class="tag-links">
				<span class="entry-utility-prep entry-utility-prep-tag-links">Etiquetado</span> <a href="http://mindfood.osoco.es/index.php/tag/grails/" rel="tag">grails</a>, <a href="http://mindfood.osoco.es/index.php/tag/groovy/" rel="tag">groovy</a>, <a href="http://mindfood.osoco.es/index.php/tag/testing/" rel="tag">testing</a>			</span>
						
			

					</footer><!-- #entry-meta -->
	</article><!-- #post-15684824031 -->

				
						<nav id="nav-below">
			<h3 class="assistive-text">Navegador de artículos</h3>
			<div class="nav-previous"><a href="http://mindfood.osoco.es/index.php/page/2/" ><span class="meta-nav">&larr;</span> Entradas más antiguas</a></div>
			<div class="nav-next"></div>
		</nav><!-- #nav-above -->
	
			
			</div><!-- #content -->
		</div><!-- #primary -->

		<div id="secondary" class="widget-area" role="complementary">
			<aside id="search-2" class="widget widget_search">	<form method="get" id="searchform" action="http://mindfood.osoco.es/">
		<label for="s" class="assistive-text">Buscar</label>
		<input type="text" class="field" name="s" id="s" placeholder="Buscar" />
		<input type="submit" class="submit" name="submit" id="searchsubmit" value="Buscar" />
	</form>
</aside>		<aside id="recent-posts-2" class="widget widget_recent_entries">		<h3 class="widget-title">Entradas recientes</h3>		<ul>
				<li><a href="http://mindfood.osoco.es/index.php/modulo-de-puppet-para-grails/" title="Módulo de Puppet para Grails">Módulo de Puppet para Grails</a></li>
				<li><a href="http://mindfood.osoco.es/index.php/android-gcm-sender/" title="Android GCM Sender">Android GCM Sender</a></li>
				<li><a href="http://mindfood.osoco.es/index.php/modulo-de-puppet-para-mysql/" title="Módulo de Puppet para MySQL">Módulo de Puppet para MySQL</a></li>
				<li><a href="http://mindfood.osoco.es/index.php/grails-android-gcm-plugin/" title="Grails Android GCM Plugin">Grails Android GCM Plugin</a></li>
				<li><a href="http://mindfood.osoco.es/index.php/mdulos-de-puppet-para-git-y-subversin/" title="Módulos de Puppet para Git y Subversión">Módulos de Puppet para Git y Subversión</a></li>
				</ul>
		</aside><aside id="recent-comments-2" class="widget widget_recent_comments"><h3 class="widget-title">Comentarios recientes</h3><ul id="recentcomments"><li class="recentcomments"><a href='http://mindfood.osoco.es/index.php/android-gcm-sender/' rel='external nofollow' class='url'>Android GCM Sender | Mindfood</a> en <a href="http://mindfood.osoco.es/index.php/hacker-fridays-o-catalizadores-de-la-innovacin/#comment-9">Hacker Fridays o catalizadores de la innovación</a></li><li class="recentcomments"><a href='http://blog.deigote.com/2012/11/12/android-gcm-sender/' rel='external nofollow' class='url'>Android GCM Sender</a> en <a href="http://mindfood.osoco.es/index.php/android-gcm-sender/#comment-8">Android GCM Sender</a></li><li class="recentcomments"><a href='http://blog.deigote.com/2012/11/12/android-gcm-sender/' rel='external nofollow' class='url'>Android GCM Sender</a> en <a href="http://mindfood.osoco.es/index.php/hacker-fridays-o-catalizadores-de-la-innovacin/#comment-7">Hacker Fridays o catalizadores de la innovación</a></li><li class="recentcomments"><a href='http://blog.deigote.com/2012/11/06/mysql-puppet-module/' rel='external nofollow' class='url'>MySQL Puppet module</a> en <a href="http://mindfood.osoco.es/index.php/modulo-de-puppet-para-mysql/#comment-6">Módulo de Puppet para MySQL</a></li><li class="recentcomments"><a href='http://blog.deigote.com/2012/10/31/grails-android-gcm-plugin/' rel='external nofollow' class='url'>Grails Android GCM Plugin &laquo; El blog de Deigote</a> en <a href="http://mindfood.osoco.es/index.php/hacker-fridays-o-catalizadores-de-la-innovacin/#comment-5">Hacker Fridays o catalizadores de la innovación</a></li></ul></aside><aside id="archives-2" class="widget widget_archive"><h3 class="widget-title">Archivos</h3>		<ul>
			<li><a href='http://mindfood.osoco.es/index.php/2012/11/' title='noviembre 2012'>noviembre 2012</a></li>
	<li><a href='http://mindfood.osoco.es/index.php/2012/10/' title='octubre 2012'>octubre 2012</a></li>
	<li><a href='http://mindfood.osoco.es/index.php/2012/08/' title='agosto 2012'>agosto 2012</a></li>
	<li><a href='http://mindfood.osoco.es/index.php/2012/03/' title='marzo 2012'>marzo 2012</a></li>
	<li><a href='http://mindfood.osoco.es/index.php/2012/02/' title='febrero 2012'>febrero 2012</a></li>
	<li><a href='http://mindfood.osoco.es/index.php/2012/01/' title='enero 2012'>enero 2012</a></li>
	<li><a href='http://mindfood.osoco.es/index.php/2011/12/' title='diciembre 2011'>diciembre 2011</a></li>
	<li><a href='http://mindfood.osoco.es/index.php/2011/11/' title='noviembre 2011'>noviembre 2011</a></li>
	<li><a href='http://mindfood.osoco.es/index.php/2011/10/' title='octubre 2011'>octubre 2011</a></li>
	<li><a href='http://mindfood.osoco.es/index.php/2011/09/' title='septiembre 2011'>septiembre 2011</a></li>
	<li><a href='http://mindfood.osoco.es/index.php/2011/07/' title='julio 2011'>julio 2011</a></li>
	<li><a href='http://mindfood.osoco.es/index.php/2011/06/' title='junio 2011'>junio 2011</a></li>
	<li><a href='http://mindfood.osoco.es/index.php/2011/05/' title='mayo 2011'>mayo 2011</a></li>
	<li><a href='http://mindfood.osoco.es/index.php/2011/02/' title='febrero 2011'>febrero 2011</a></li>
	<li><a href='http://mindfood.osoco.es/index.php/2011/01/' title='enero 2011'>enero 2011</a></li>
	<li><a href='http://mindfood.osoco.es/index.php/2010/07/' title='julio 2010'>julio 2010</a></li>
	<li><a href='http://mindfood.osoco.es/index.php/2010/04/' title='abril 2010'>abril 2010</a></li>
	<li><a href='http://mindfood.osoco.es/index.php/2010/03/' title='marzo 2010'>marzo 2010</a></li>
		</ul>
</aside><aside id="categories-2" class="widget widget_categories"><h3 class="widget-title">Categorías</h3>		<ul>
	<li class="cat-item cat-item-58"><a href="http://mindfood.osoco.es/index.php/category/administracion-de-sistemas/" title="Ver todas las entradas archivadas en Administración de sistemas">Administración de sistemas</a>
</li>
	<li class="cat-item cat-item-43"><a href="http://mindfood.osoco.es/index.php/category/photo/" title="Ver todas las entradas archivadas en photo">photo</a>
</li>
	<li class="cat-item cat-item-62"><a href="http://mindfood.osoco.es/index.php/category/programacion/" title="Ver todas las entradas archivadas en Programación">Programación</a>
</li>
	<li class="cat-item cat-item-39"><a href="http://mindfood.osoco.es/index.php/category/quote/" title="Ver todas las entradas archivadas en quote">quote</a>
</li>
	<li class="cat-item cat-item-41"><a href="http://mindfood.osoco.es/index.php/category/regular/" title="Ver todas las entradas archivadas en regular">regular</a>
</li>
	<li class="cat-item cat-item-1"><a href="http://mindfood.osoco.es/index.php/category/sin-categoria/" title="Ver todas las entradas archivadas en Sin categoría">Sin categoría</a>
</li>
	<li class="cat-item cat-item-42"><a href="http://mindfood.osoco.es/index.php/category/video/" title="Ver todas las entradas archivadas en video">video</a>
</li>
		</ul>
</aside><aside id="meta-2" class="widget widget_meta"><h3 class="widget-title">Meta</h3>			<ul>
						<li><a href="http://mindfood.osoco.es/wp-login.php">Acceder</a></li>
			<li><a href="http://mindfood.osoco.es/index.php/feed/" title="Suscribirse a este sitio usando RSS 2.0"><abbr title="Really Simple Syndication">RSS</abbr> de las entradas</a></li>
			<li><a href="http://mindfood.osoco.es/index.php/comments/feed/" title="Últimos comentarios a todas las entradas en RSS"><abbr title="Really Simple Syndication">RSS</abbr> de los comentarios</a></li>
			<li><a href="http://es.wordpress.org/" title="Gestionado con WordPress, una avanzada plataforma semántica de publicación personal.">WordPress.org</a></li>
						</ul>
</aside>		</div><!-- #secondary .widget-area -->

	</div><!-- #main -->

	<footer id="colophon" role="contentinfo">

			

			<div id="site-generator">&copy; 2012 OSOCO</div>
	</footer><!-- #colophon -->
</div><!-- #page -->


<!-- WP SyntaxHighlighter Ver.1.7.3 Begin -->
<script type="text/javascript" src="http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0"></script>
<script type="text/javascript" src="http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shAutoloader.js?ver=3.0"></script>
<script type="text/javascript" src="http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0"></script>
<script type="text/javascript">//<![CDATA[
	SyntaxHighlighter.autoloader(
	"applescript	http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushAppleScript.js?ver=3.0"
	,"as3 actionscript3	http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushAS3.js?ver=3.0"
	,"bash shell	http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushBash.js?ver=3.0"
	,"cf coldfusion	http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushColdFusion.js?ver=3.0"
	,"cpp c	http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCpp.js?ver=3.0"
	,"c# c-sharp csharp	http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0"
	,"css	http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCss.js?ver=3.0"
	,"delphi pas pascal	http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushDelphi.js?ver=3.0"
	,"diff patch	http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushDiff.js?ver=3.0"
	,"erl erlang	http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushErlang.js?ver=3.0"
	,"groovy	http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushGroovy.js?ver=3.0"
	,"java	http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJava.js?ver=3.0"
	,"jfx javafx	http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJavaFX.js?ver=3.0"
	,"js jscript javascript	http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0"
	,"perl pl	http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPerl.js?ver=3.0"
	,"php	http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPhp.js?ver=3.0"
	,"plain text	http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPlain.js?ver=3.0"
	,"ps powershell	http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPowerShell.js?ver=3.0"
	,"py python	http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0"
	,"rails ror ruby rb	http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0"
	,"sass scss	http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushSass.js?ver=3.0"
	,"scala	http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushScala.js?ver=3.0"
	,"sql	http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushSql.js?ver=3.0"
	,"vb vbnet	http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushVb.js?ver=3.0"
	,"xml xhtml xslt html	http://mindfood.osoco.es/wp-content/plugins/wp-syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0"
	);
	SyntaxHighlighter.defaults['auto-links'] = true;
	SyntaxHighlighter.defaults['quick-code'] = true;
	SyntaxHighlighter.defaults['title'] = '';
	SyntaxHighlighter.defaults['class-name'] = 'notranslate';
	SyntaxHighlighter.defaults['collapse'] = false;
	SyntaxHighlighter.defaults['first-line'] = 1;
	SyntaxHighlighter.defaults['gutter'] = true;
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['smart-tabs'] = true;
	SyntaxHighlighter.defaults['tab-size'] = 4;
	SyntaxHighlighter.defaults['toolbar'] = true;
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = "Can't find brush for: ";
	SyntaxHighlighter.config.strings.brushNotHtmlScript = "Brush wasn't configured for html-script option: ";
	SyntaxHighlighter.all();
	
//]]></script>
<!-- WP SyntaxHighlighter Ver.1.7.3 End -->
<script type='text/javascript' src='http://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201419'></script>

</body>
</html>